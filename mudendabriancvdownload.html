<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brian Mudenda - Curriculum Vitae (3-Page A4)</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
            font-size: 11pt; /* Increased font size */
        }
        .container {
            /* Standard screen view: Wide container */
            max-width: 900px;
            margin: 30px auto;
            background: #fff;
            padding: 40px; 
            border-radius: 6px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .page {
            /* Add some visual separation for the screen view */
            margin-bottom: 50px; 
            padding: 0; /* Content padding is handled by the JS margin logic */
        }

        .download-btn {
            float: right;
            background: #007bff;
            color: #fff;
            padding: 10px 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 20px;
        }
        .download-btn:hover {
            background: #0056b3;
        }
        .hide-for-print {
            display: none !important;
        }
        
        h1 {
            font-size: 24pt;
            color: #333;
        }
        h2 {
            font-size: 16pt;
            color: #333;
        }
        .section-title {
            border-bottom: 2px solid #555;
            padding-bottom: 4px;
            margin-top: 30px;
            margin-bottom: 10px;
            font-size: 20px;
        }
        /* Table Redesign */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            border: none;
            font-size: 11pt;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            border-bottom: 2px solid #333;
            background-color: #f9f9f9;
            font-weight: bold;
        }
        td {
            border-bottom: 1px solid #eee;
        }
        table tr:last-child td {
            border-bottom: none;
        }
        /* List Spacing */
        ul {
            margin-top: 5px;
            margin-bottom: 15px;
            padding-left: 20px;
            font-size: 11.5pt;
        }
        ul li {
            margin-bottom: 3px;
        }
    </style>
</head>

<body>

    <div class="container" id="cvContent">

        <button class="download-btn" id="downloadBtn" onclick="downloadPDF()">⬇️ PDF (3 Pages)</button>

        <div id="page-one" class="page">
            <h1>CURRICULUM VITAE (CV)</h1>

            <h2 class="section-title">PERSONAL DETAILS</h2>
            <p><strong>Name:</strong> Brian Mudenda</p>
            <p><strong>Gender:</strong> Male</p>
            <p><strong>Date of Birth:</strong> 25 Apr 1987</p>
            <p><strong>NRC No.:</strong> 993089/11/1</p>
            <p><strong>Mobile:</strong> 0978167546</p>
            <p><strong>Email:</strong> mudenda5brian@gmail.com</p>
            <p><strong>Town:</strong> Luangwa</p>
            <p><strong>Work Experience:</strong> 9 Years</p>
            <p><strong>Highest Qualification:</strong> Degree</p>

            <h2 class="section-title">EDUCATION BACKGROUND</h2>
            <table>
                <tr>
                    <th>NO.</th>
                    <th>INSTITUTION</th>
                    <th>PROGRAMME</th>
                    <th>START</th>
                    <th>END</th>
                    <th>QUALIFICATION</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>UNZA</td>
                    <td>Demography & Development Studies</td>
                    <td>Jan 2009</td>
                    <td>Dec 2022</td>
                    <td>Degree</td>
                </tr>
            </table>
        </div>
        
        <div id="page-two" class="page">
            <h2 class="section-title">WORK EXPERIENCE</h2>

            <p><strong>FAO – Field Enumerator</strong> (Jan 2014 – Jun 2014)</p>
            <ul>
                <li>Data capture through focus discussions and interviews.</li>
                <li>Data entry and analysis for Conservation Agriculture Scaling Up project.</li>
            </ul>

            <p><strong>ECZ – Assistant Registration Officer</strong> (Feb 2015 – Dec 2016)</p>
            <ul>
                <li>Biometric and demographic data capture and analysis for voter registration.</li>
            </ul>

            <p><strong>CMMB USAID Z-CHPP – Field Data Associate</strong> (Apr 2017 – Sep 2017)</p>
            <ul>
                <li>Data entry, analysis, and report writing.</li>
                <li>Data Quality Assurance (DQA) and program M&E.</li>
                <li>Capacity building for data collectors.</li>
            </ul>

            <p><strong>CMMB USAID Z-CHPP – District Coordinator</strong> (Oct 2017 – Sep 2018)</p>
            <ul>
                <li>Program coordination for HIV prevention activities.</li>
                <li>Stakeholder collaboration and savings group coordination.</li>
            </ul>

            <p><strong>CMMB USAID Z-CHPP – Field Data Associate</strong> (Oct 2018 – Sep 2019)</p>
            <ul>
                <li>Data entry in <strong>DHIS2</strong> and <strong>SMARTCARE</strong> systems.</li>
                <li>Conducting <strong>DQAs</strong> and providing technical support to volunteers.</li>
            </ul>

            <p><strong>CMMB USAID Z-CHPP – District Coordinator</strong> (Oct 2019 – Sep 2021)</p>
            <ul>
                <li>Coordinated <strong>GBV LIVES</strong>, radio programs, <strong>COVID-19</strong> awareness, and <strong>HIV</strong> prevention.</li>
                <li>Led service promotion (<strong>HIVST</strong>, <strong>PEP</strong>, <strong>PrEP</strong>, <strong>PMTCT</strong>, <strong>VMMC</strong>, condom distribution).</li>
                <li>Community engagement and partnerships.</li>
            </ul>

            <p><strong>CMMB ECAP1 – Strategic Information Officer</strong> (Jan 2022 – Present)</p>
            <ul>
                <li>Monitoring & Evaluation and <strong>CommCare</strong> data analysis.</li>
                <li>Data Quality Assurance and technical support for field volunteers.</li>
            </ul>

            <h2 class="section-title">SKILLS</h2>
            <ul>
                <li>Monitoring & Evaluation, research, reporting, program coordination.</li>
                <li>Data analysis (<strong>DHIS2</strong>, <strong>STATA</strong>, <strong>SPSS</strong>, <strong>CommCare</strong>, Excel).</li>
                <li>Stakeholder engagement and capacity building.</li>
                <li>Web Development, Data e-capture and <strong>Python</strong> (<strong>Pandas</strong>) analysis.</li>
            </ul>
        </div>

        <div id="page-three" class="page">
            <h2 class="section-title">REFEREES</h2>
            <table>
                <tr>
                    <th>NO.</th>
                    <th>NAME</th>
                    <th>MOBILE</th>
                    <th>EMAIL</th>
                    <th>POSITION</th>
                    <th>ORGANISATION</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Felix Chibesa</td>
                    <td>+260979926394</td>
                    <td>felixchibesa@yahoo.com</td>
                    <td>DCOP</td>
                    <td>CMMB ECAP1</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Milner Matambo</td>
                    <td>0977532298</td>
                    <td>milnermatambo@gmail.com</td>
                    <td>Zonal Lead</td>
                    <td>Project Concern</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Raison Kanyinji</td>
                    <td>0977299280</td>
                    <td>rkanyinji@cmmb.org</td>
                    <td>DCOP</td>
                    <td>A2Health Zambia</td>
                </tr>
            </table>
        </div>
    </div>

<script>
async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const downloadBtn = document.getElementById("downloadBtn");
    
    // Elements to be converted to separate pages
    const pages = [
        document.getElementById("page-one"),
        document.getElementById("page-two"),
        document.getElementById("page-three")
    ];

    // Margins (in mm) for the final PDF page
    const marginH = 15; // Horizontal margins (left/right)
    const marginV = 20; // Vertical margins (top/bottom)

    const a4Width = 210;
    const a4Height = 297;
    const contentWidth = a4Width - (2 * marginH);

    // Temporarily hide the button
    downloadBtn.classList.add("hide-for-print");

    const pdf = new jsPDF("p", "mm", "a4");
    
    // Loop through each page element, capture it, and add it to the PDF
    for (let i = 0; i < pages.length; i++) {
        const pageElement = pages[i];
        
        // 1. Capture the HTML section as an image
        const canvas = await html2canvas(pageElement, { scale: 2 });
        const imgData = canvas.toDataURL("image/jpeg", 1.0);
        
        // 2. Calculate image dimensions maintaining aspect ratio
        const imgHeight = canvas.height * contentWidth / canvas.width;
        
        // 3. Add a new page if it's not the first one
        if (i > 0) {
            pdf.addPage();
        }
        
        // 4. Add the captured image to the current PDF page, inside the margins
        // The image height must fit within a single page's content area (a4Height - 2*marginV)
        // If the content is correctly sized, it will fit.
        pdf.addImage(imgData, "JPEG", marginH, marginV, contentWidth, imgHeight);
    }
    
    pdf.save("Brian_Mudenda_CV_3Page.pdf");

    // Unhide the button
    downloadBtn.classList.remove("hide-for-print");
}
</script>

</body>
</html>
