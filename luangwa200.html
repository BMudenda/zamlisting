<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Luangwa Feira Rides | Book a Ride</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <meta name="theme-color" content="#2b6ef6">

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --primary-color: #2563eb;
      --secondary-color: #ff9900;
      --bg-color-body: #f5f5f5;
      --bg-color-card: #ffffff;
      --border-color-light: #e0e0e0;
      --font-color-dark: #333;
      --font-color-medium: #555;
    }
    body { font-family: 'Roboto', Arial, sans-serif; background-color: var(--bg-color-body); color: var(--font-color-dark); }

    header { background: var(--font-color-dark); color: white; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .header-content { max-width: 1200px; margin: auto; padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; }
    .company-info h2 { font-size: 1.2rem; color: var(--secondary-color); }
    .menu-button { background: none; border: none; color: white; font-size: 1.3rem; cursor: pointer; }

    .product-container { max-width: 600px; margin: 20px auto; padding: 0 15px; }
    .booking-container { background: var(--bg-color-card); border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); padding: 20px; }
    
    fieldset { border: 1px solid var(--border-color-light); border-radius: 10px; padding: 15px; background: #fafafa; margin-bottom: 20px; }
    legend { font-weight: bold; color: var(--primary-color); padding: 0 10px; font-size: 0.95rem; display: flex; align-items: center; gap: 6px; }
    legend .material-icons { font-size: 18px; }

    /* Unified Field Style */
    .field-wrapper { margin-bottom: 15px; display: flex; flex-direction: column; gap: 5px; }
    .field-label { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; font-weight: 500; color: var(--font-color-medium); margin-left: 4px; }
    .field-label .material-icons { font-size: 18px; color: var(--primary-color); }

    .input-box {
      background: white;
      border: 1px solid var(--border-color-light);
      border-radius: 8px;
      padding: 12px 15px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      position: relative;
    }
    .input-box input {
      width: 100%;
      border: none;
      outline: none;
      font-size: 1.1rem;
      font-weight: bold;
      color: var(--font-color-dark);
      background: transparent;
    }
    .input-box input::placeholder { font-weight: normal; color: #bbb; font-size: 0.95rem; }

    /* Radio Group */
    .radio-group { display: flex; justify-content: space-around; padding: 10px 0; }
    .radio-item { display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer; }
    .radio-item .mode-icon { font-size: 32px; color: var(--primary-color); }

    /* Summary Card Styling (No Icons) */
    .summary-card {
      background: white;
      border: 1px solid var(--border-color-light);
      border-radius: 8px;
      padding: 12px 15px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .summary-label { font-size: 0.95rem; color: var(--font-color-medium); font-weight: 500; }
    .summary-value { font-weight: bold; font-size: 1.1rem; }
    .summary-value b { color: var(--secondary-color); font-size: 1.25rem; }

    /* Autocomplete */
    .autocomplete-list {
      position: absolute;
      top: 100%; left: 0; width: 100%;
      background: white; border: 1px solid var(--border-color-light);
      z-index: 100; max-height: 150px; overflow-y: auto; border-radius: 0 0 8px 8px;
    }
    .suggestion { padding: 10px; cursor: pointer; border-bottom: 1px solid #eee; font-size: 0.9rem; }
    .suggestion:hover { background: #f0f4ff; }

    .summary-actions { display: flex; flex-direction: column; align-items: center; margin-top: 15px; }
    .submit-btn {
      background: var(--primary-color); color: white; width: 50px; height: 50px;
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-size: 24px; text-decoration: none; box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
    }
    .submit-btn[disabled] { opacity: 0.4; pointer-events: none; }

    .status-text { text-align: center; font-size: 0.9rem; margin-top: 10px; color: var(--font-color-medium); }
    .hidden-section { display: none; }
    .loader { width: 30px; height: 30px; border: 3px solid #f3f3f3; border-top: 3px solid var(--secondary-color); border-radius: 50%; animation: spin 1s linear infinite; margin: 10px auto; display: none; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body>

  <header>
    <div class="header-content">
      <div class="company-info"><h2>Luangwa Feira Rides</h2></div>
      <button class="menu-button"><i class="fas fa-ellipsis-v"></i></button>
    </div>
  </header>

  <main class="product-container">
    <div class="booking-container">
      
      <fieldset>
        <legend><span class="material-icons">account_circle</span> Customer Identity</legend>
        <div class="field-wrapper">
          <label class="field-label"><span class="material-icons">phone</span> Phone Number</label>
          <div class="input-box">
            <input type="tel" id="customer-phone" maxlength="10" placeholder="0xxxxxxxxx" inputmode="numeric">
          </div>
        </div>
      </fieldset>

      <div id="trip-details" class="hidden-section">
        <fieldset>
          <legend>Choose Mode</legend>
          <div class="radio-group" id="mode-group">
            <label class="radio-item">
              <span class="mode-icon material-icons">motorcycle</span>
              <span>Motorbike</span>
              <input type="radio" name="mode" value="motorbike">
            </label>
            <label class="radio-item">
              <span class="mode-icon material-icons">directions_car</span>
              <span>Vehicle</span>
              <input type="radio" name="mode" value="vehicle">
            </label>
          </div>
        </fieldset>

        <fieldset>
          <legend>Trip Details</legend>
          <div class="field-wrapper">
            <label class="field-label"><span class="material-icons">place</span> Pickup Point</label>
            <div class="input-box">
              <input type="text" id="gm-origin" placeholder="Type pickup location...">
              <div id="originList" class="autocomplete-list"></div>
            </div>
          </div>

          <div class="field-wrapper">
            <label class="field-label"><span class="material-icons">flag</span> Destination</label>
            <div class="input-box">
              <input type="text" id="gm-destination" placeholder="Type where to go...">
              <div id="destinationList" class="autocomplete-list"></div>
            </div>
          </div>
        </fieldset>
      </div>

      <div id="summary-section" class="hidden-section">
        <fieldset>
          <legend>Trip Summary</legend>
          <div id="summary-cards"></div>
        </fieldset>
        
        <div class="summary-actions">
          <a href="#" class="fas fa-paper-plane submit-btn" id="submit-btn"></a>
          <p style="margin-top:8px; font-weight:bold;">Request Now</p>
        </div>
      </div>

      <div class="loader" id="spinner"></div>
      <p id="status" class="status-text">Enter phone to begin.</p>
    </div>
  </main>

  <script>
    const config = { vPrice: 3.0, mPrice: 1.02, vMin: 20, mMin: 10, vEx: 6, mEx: 2.04 };
    const places = ["Anglican Church","Airstrip","Big 2 Zambezi Water Front Resort & Safari","BM Residence","Boma Clinic","Chidada Ground","Car Wash Pub","Chitope","Chitope Rural Health Centre","Chilombwe Community School","Chiriwe Primary School","Dzalo Skills Training Centre Kambolozo","Feira Kindom Hall","Feira Day Secondary School","Gerasmos Safari Lodge","Hill View","JB Three Boarders Mall","JB Three Boarders Club","Justifeli Lodge","Kakaro Primary School","Kakaro Liberation Heritage Site","Kantuleni Executive Lodge","Kapoche","Kaunga Secondary School","Kasinsa","Katondwe Chapel","Katondwe Chaz Hotel","Katondwe Dam","Katondwe Girls Secondary School","Katondwe Mission Hospital","Katondwe Primary School","Kavalamanja","Luangwa (Feira)","Luangwa Basic School","Luangwa Bridge","Luangwa Bridge Market","Luangwa Bus Station","Luangwa Council Lodge","Luangwa DC Office","Luangwa DEBS Offices","Luangwa District Hospital","Luangwa High School Police Post","Boma Filling Station","Luangwa Habour","Indeco Building","Luangwa Market","Luangwa Main SDA Church","Mburuma Local Court","Luangwa Police Station","Luangwa Post Office","Luangwa Town Council","Luangwa Secondary School","Makichilo Lodge","Mwavi Secondary School","Mwalila Primary School","Nyabota Lodge","Passover Living Lamb Ministry Katondwe","Pentecostal Assembly of God Joshua Assembly","UCZ","Soweto Junction","Registration Office","River Spot Club","SDA Katondwe","Yangoma Lodge","Yellow Shop","ZESCO Office"];
    
    const phoneInput = document.getElementById('customer-phone');
    const tripDiv = document.getElementById('trip-details');
    const summaryDiv = document.getElementById('summary-section');
    const status = document.getElementById('status');
    const spinner = document.getElementById('spinner');

    function checkInputs() {
      const phone = phoneInput.value;
      const isValidPhone = /^0[0-9]{9}$/.test(phone);
      
      if (isValidPhone) {
        tripDiv.classList.remove('hidden-section');
        status.textContent = "Select your trip details.";
      } else {
        tripDiv.classList.add('hidden-section');
        summaryDiv.classList.add('hidden-section');
        status.textContent = "Enter a valid 10-digit phone number.";
        return;
      }

      const origin = document.getElementById('gm-origin').value;
      const dest = document.getElementById('gm-destination').value;
      const mode = document.querySelector('input[name="mode"]:checked');

      if (places.includes(origin) && places.includes(dest) && mode) {
        showSummary(origin, dest, mode.value);
      }
    }

    function showSummary(origin, dest, mode) {
      spinner.style.display = 'block';
      summaryDiv.classList.add('hidden-section');
      
      setTimeout(() => {
        spinner.style.display = 'none';
        summaryDiv.classList.remove('hidden-section');
        status.textContent = "";
        
        const dist = 5.2; // Example distance
        const price = mode === 'vehicle' ? Math.max(dist * config.vPrice, config.vMin) + config.vEx : Math.max(dist * config.mPrice, config.mMin) + config.mEx;

        document.getElementById('summary-cards').innerHTML = `
          <div class="summary-card">
            <span class="summary-label">Total Fare</span>
            <span class="summary-value"><b>K${Math.round(price)}</b></span>
          </div>
          <div class="summary-card">
            <span class="summary-label">Trip Distance</span>
            <span class="summary-value">${dist} km</span>
          </div>
        `;
      }, 600);
    }

    function setupAuto(id, listId) {
      const input = document.getElementById(id);
      const list = document.getElementById(listId);
      input.addEventListener('input', () => {
        const val = input.value.toLowerCase();
        list.innerHTML = '';
        if (!val) return;
        places.filter(p => p.toLowerCase().includes(val)).forEach(p => {
          const d = document.createElement('div');
          d.className = 'suggestion'; d.textContent = p;
          d.onclick = () => { input.value = p; list.innerHTML = ''; checkInputs(); };
          list.appendChild(d);
        });
      });
    }

    phoneInput.addEventListener('input', checkInputs);
    document.getElementById('mode-group').addEventListener('change', checkInputs);
    setupAuto('gm-origin', 'originList');
    setupAuto('gm-destination', 'destinationList');
  </script>
</body>
</html>
