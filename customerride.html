<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZamTaxi | Book a Ride</title>
  <meta property="og:image" content="https://zamlisting.com/taxi.webp" />
  <meta property="og:image:secure_url" content="https://zamlisting.com/taxi.webp" />
  <meta property="og:image:width" content="220" />
  <meta property="og:image:height" content="120" />
  <meta property="og:url" content="https://zamlisting.com/taxi" />
  <meta property="og:title" content="ZamTaxi | Book a Ride" />
  <meta property="og:description" content="Book your taxi ride in Lusaka! Choose vehicle or motorbike, enter trip details, and submit via SMS or WhatsApp." />
  <meta property="og:type" content="website" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --primary-color: #2563eb;
      --secondary-color: #ff9900;
      --success-color: #1aaf5d;
      --whatsapp-color: #25d366;
      --fail-color: #dc2626;
      --bg-color-body: #f5f5f5;
      --bg-color-card: #ffffff;
      --bg-color-input: #f5f7fa;
      --border-color-light: #ccc;
      --border-color-blue: #2563eb;
      --box-shadow-light: 0 2px 5px rgba(0,0,0,0.1);
      --box-shadow-strong: 0 4px 8px rgba(0, 0, 0, 0.2);
      --font-color-dark: #333;
      --font-color-medium: #2d3a4a;
    }
    body { font-family: 'Roboto', Arial, sans-serif; background-color: var(--bg-color-body); color: var(--font-color-dark); }
    header {
      background: var(--font-color-dark); color: white; padding: 20px; text-align: left;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .header-content {
      max-width: 1200px; margin: auto; display: flex; flex-wrap: wrap;
      justify-content: space-between; align-items: center; gap: 15px;
    }
    .company-info { flex: 1 1 60%; }
    .company-info h2 { font-size: 1.4rem; color: var(--secondary-color); }
    .company-info ul { list-style: none; margin-top: 8px; }
    .company-info li { margin-bottom: 5px; font-size: 0.95rem; }
    .price-tag {
      font-size: 1.3rem; font-weight: bold; background: #e67e22;
      padding: 8px 15px; border-radius: 5px; color: white;
    }
    .product-container {
      max-width: 1200px; margin: 30px auto; padding: 0 20px;
      display: flex; flex-wrap: wrap; gap: 30px;
    }
    .map-section { flex: 1 1 60%; min-width: 300px; }
    .booking-section { flex: 1 1 35%; min-width: 300px; }
    .map-container {
      background: white; border-radius: 8px;
      box-shadow: var(--box-shadow-light); overflow: hidden;
      height: 400px; display: none;
    }
    #google-map-frame {
      width: 100%; height: 100%; border: none; border-radius: 8px;
    }
    .booking-container {
      background: var(--bg-color-card); border-radius: 8px;
      box-shadow: var(--box-shadow-strong);
      padding: 20px;
    }
    .inputs-wrapper { display: flex; flex-direction: column; gap: 15px; margin: 15px 0; }
    .input-group {
      position: relative; background: var(--bg-color-input); border-radius: 5px;
      padding: 10px 10px 10px 40px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .input-group label {
      font-weight: bold; color: var(--primary-color); font-size: 0.9rem;
      margin-bottom: 5px; display: block;
    }
    .input-group .material-icons.input-icon {
      position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
      color: var(--primary-color); font-size: 20px; opacity: 0.85;
    }
    input, select {
      width: 100%; padding: 10px; font-size: 1rem; border-radius: 5px;
      border: 1px solid var(--border-color-light); transition: border 0.2s, box-shadow 0.2s;
      background-color: transparent;
    }
    input:focus, select:focus {
      border: 1px solid var(--border-color-blue); box-shadow: 0 0 0 2px rgba(37,99,235,0.2);
    }
    .mode-group {
      display: flex; gap: 10px; flex-wrap: wrap;
    }
    .mode-radio {
      display: flex; align-items: center; gap: 5px; font-size: 0.95rem;
      cursor: pointer;
    }
    .mode-radio input { width: auto; margin-right: 5px; }
    .summary-table-section {
      margin-top: 20px; padding: 15px; background: var(--bg-color-card);
      border-radius: 8px; box-shadow: var(--box-shadow-light);
    }
    .section-title {
      font-weight: bold; color: var(--primary-color); font-size: 1.1rem;
      margin-bottom: 10px; display: flex; align-items: center; gap: 5px;
    }
    .summary-table-wrapper { overflow-x: auto; }
    table.summary-table {
      width: 100%; border-collapse: collapse; font-size: 0.95rem;
      background: #f9fbfd; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    table.summary-table th, table.summary-table td {
      border: 1px solid #dbeafe; padding: 8px; text-align: left;
    }
    table.summary-table th {
      background-color: #e7f0fe; color: #222; font-weight: bold;
    }
    table.summary-table td { color: var(--font-color-medium); font-weight: 500; }
    .summary-actions-row {
      display: flex; gap: 15px; justify-content: center; margin: 10px 0; align-items: center;
      flex-wrap: wrap;
    }
    .button-wrapper {
      display: flex; align-items: center; gap: 5px;
    }
    .button-label {
      font-size: 0.95rem; color: var(--font-color-dark); font-weight: 500;
    }
    .fa {
      padding: 10px;
      font-size: 24px;
      width: 44px;
      height: 44px;
      line-height: 24px;
      text-align: center;
      text-decoration: none;
      margin: 5px;
      border-radius: 50%;
      color: white;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .fa-calculator { background: var(--primary-color); }
    .fa-map { background: var(--primary-color); }
    .fa-whatsapp { background: var(--whatsapp-color); }
    .fa-comment { background: var(--secondary-color); }
    .fa-share-alt { background: #3498db; }
    .calculate-btn:hover { background: #174ea6; }
    .map-btn:hover { background: #174ea6; }
    .whatsapp-btn:hover { background: var(--whatsapp-color); }
    .sms-btn:hover { background: #ff9800; }
    .fa-share-alt:hover { background: #2980b9; }
    .calculate-btn[disabled], .map-btn[disabled], .whatsapp-btn[disabled], .sms-btn[disabled] {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .loader {
      display: none; width: 20px; height: 20px; border: 3px solid var(--primary-color);
      border-radius: 50%; border-top: 3px solid #e5e7eb;
      animation: spin 1s linear infinite; margin: 10px auto;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .submit-status {
      display: flex; align-items: center; gap: 5px; margin-top: 10px;
      justify-content: center; font-weight: 500;
    }
    .submit-status.success { color: var(--success-color); }
    .submit-status.failed { color: var(--fail-color); }
    .material-icons { font-size: 20px; vertical-align: middle; }
    .share-options {
      display: none;
      justify-content: center;
      gap: 15px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="company-info">
        <h2>ZamListing Booking</h2>
        <ul>
          <li><strong>Location:</strong> Luangwa, Zambia</li>
        </ul>
      </div>
      <div>
        <div class="price-tag">Book Your Ride Now!</div>
      </div>
    </div>
  </header>

  <main class="product-container">
    <section class="map-section">
      <div class="map-container" id="mapContainer">
        <iframe id="google-map-frame" allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </section>

    <section class="booking-section">
      <div class="booking-container">
        <div class="inputs-wrapper">
          <div class="input-group" id="mode-group-wrapper">
            <span class="material-icons input-icon">commute</span>
            <label for="mode-of-transport">Preferred Mode</label>
            <div class="mode-group" id="mode-group">
              <label class="mode-radio">
                <input type="radio" name="mode" value="vehicle" id="mode-vehicle">
                <span class="material-icons">directions_car</span>Vehicle
              </label>
              <label class="mode-radio">
                <input type="radio" name="mode" value="motorbike" id="mode-motorbike">
                <span class="material-icons">two_wheeler</span>Motorbike
              </label>
            </div>
          </div>
          <div class="input-group" id="customer-phone-wrapper">
            <span class="material-icons input-icon">phone</span>
            <label for="customer-phone">Phone Number</label>
            <input
              type="tel"
              id="customer-phone"
              maxlength="10"
              placeholder="0XXXXXXXXX"
              autocomplete="off"
              inputmode="numeric"
            >
          </div>
          <div class="input-group">
            <span class="material-icons input-icon">place</span>
            <label for="gm-origin">From</label>
            <select id="gm-origin"></select>
          </div>
          <div class="input-group">
            <span class="material-icons input-icon">flag</span>
            <label for="gm-destination">To</label>
            <select id="gm-destination"></select>
          </div>
        </div>
        <div class="summary-table-section">
          <div class="section-title">
            <span class="material-icons">table_chart</span>
            Trip Summary
          </div>
          <div class="summary-table-wrapper">
            <div id="summary-table-container"></div>
          </div>
          <div class="summary-actions-row">
            <div class="button-wrapper">
              <a href="#" class="calculate-btn fa fa-calculator" title="Calculate" id="calculate-btn"></a>
              <span class="button-label">Calculate</span>
            </div>
            <div class="button-wrapper">
              <a href="#" class="map-btn fa fa-map" id="map-btn" title="Show Map"></a>
              <span class="button-label" id="map-btn-label">Show Map</span>
            </div>
            <div class="button-wrapper">
              <a href="#" class="fa fa-share-alt" title="Share Trip Details" id="share-trip-btn"></a>
              <span class="button-label">Share</span>
            </div>
          </div>
          <div id="submit-status" class="submit-status"></div>
          <div id="loader" class="loader"></div>
          
          <div class="share-link-section">
              <div class="share-options" id="share-options-container">
                <div class="button-wrapper">
                  <a href="#" class="sms-btn fa fa-comment" title="Share via SMS" id="share-sms-btn"></a>
                  <span class="button-label">SMS</span>
                </div>
                <div class="button-wrapper">
                  <a href="#" class="whatsapp-btn fa fa-whatsapp" title="Share via WhatsApp" id="share-whatsapp-btn"></a>
                  <span class="button-label">WhatsApp</span>
                </div>
              </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Data and Configuration
    const config = {
      smsNumber: '0978167546',
      whatsappNumber: '+260978167546',
      vehiclePricePer3Km: 20,
      motorbikePricePer3Km: 10,
      avgSpeed: 60,
      googleMapsBaseUrl: 'https://maps.google.com/maps?q=',
      shareLinkUrl: 'http://www.zamlisting.com/customerride'
    };

    const places = [
      "Luangwa (Feira)", "Chitope", "Luangwa Market", "Kasinsa", "Kapoche",
      "Kakaro Primary School", "Makichilo Lodge", "Gerasmos Safari Lodge",
      "Justifeli Lodge", "Kantuleni executive Lodge", "Feira Kindom Hall",
      "Luangwa main sda churh", "Pentocostal Assembly of God Joshua Assembly",
      "UCZ", "JB THREE BOARDERS MALL", "yellow shop", "Anglican Church",
      "Big 2 Zambezi Water Front Resort & Safari", "Luangwa Secondary School",
      "Luangwa District Hospital", "Kavalamanja", "Luangwa Police Station",
      "Zambia Electricity Supply Corporation", "Luangwa Post Office",
      "Luangwa Basic School", "Luangwa Habour", "Luangwa Indeco",
      "Luangwa District Comission office", "Luangwa District Education Board Offices",
      "Luangwa Council lodge", "Yangoma Hotel", "Luangwa Filling Station",
      "Dzalo Skills Training Centre kambolozo", "Boma Clinic", "BM residence",
      "Luangwa Feira Day Secondary School", "Katondwe Mission Hospital",
      "Mwavi Secondary School", "Luangwa Bridge", "Luangwa Bridge Market"
    ];

    const segments = [
      { from: "Luangwa (Feira)", to: "Kapoche", distance: 28 },
      { from: "Luangwa (Feira)", to: "Katondwe Mission Hospital", distance: 52 },
      { from: "Luangwa (Feira)", to: "Luangwa Market", distance: 0.1 },
      { from: "Luangwa Market", to: "Luangwa (Feira)", distance: 0.1 },
      { from: "Luangwa (Feira)", to: "Luangwa District Hospital", distance: 4.6 },
      { from: "Luangwa (Feira)", to: "Kakaro Primary School", distance: 12 },
      { from: "Luangwa District Hospital", to: "Kavalamanja", distance: 23 },
      { from: "Katondwe Mission Hospital", to: "Kasinsa", distance: 16 },
      { from: "Chitope", to: "Kasinsa", distance: 10 },
      { from: "Luangwa (Feira)", to: "Luangwa Police Station", distance: 0.55 },
      { from: "Luangwa (Feira)", to: "Makichilo Lodge", distance: 0.40 },
      { from: "Luangwa (Feira)", to: "Anglican Church", distance: 0.75 },
      { from: "Luangwa (Feira)", to: "Feira Kindom Hall", distance: 0.7 },
      { from: "Luangwa (Feira)", to: "UCZ", distance: 0.5 },
      { from: "Luangwa (Feira)", to: "Pentocostal Assembly of God Joshua Assembly", distance: 0.6 },
      { from: "Luangwa Police Station", to: "Luangwa Post Office", distance: 1.1 },
      { from: "Luangwa Post Office", to: "Luangwa District Comission office", distance: 0 },
      { from: "Luangwa Market", to: "Luangwa Basic School", distance: 0.45 },
      { from: "Luangwa Market", to: "Luangwa Habour", distance: 0.5 },
      { from: "Luangwa (Feira)", to: "Luangwa Indeco", distance: 0.9 },
      { from: "Luangwa Indeco", to: "Luangwa Council lodge", distance: 0.25 },
      { from: "Luangwa Council lodge", to: "Yangoma Hotel", distance: 0.15 },
      { from: "Luangwa Council lodge", to: "Zambia Electricity Supply Corporation", distance: 2.4 },
      { from: "Yangoma Hotel", to: "Luangwa Filling Station", distance: 0.7 },
      { from: "Kantuleni executive Lodge", to: "Luangwa Filling Station", distance: 0.190 },
      { from: "Luangwa Filling Station", to: "Dzalo Skills Training Centre kambolozo", distance: 0.3 },
      { from: "Dzalo Skills Training Centre kambolozo", to: "Boma Clinic", distance: 0.2 },
      { from: "Boma Clinic", to: "BM residence", distance: 0.6 },
      { from: "BM residence", to: "Luangwa Feira Day Secondary School", distance: 1.1 },
      { from: "Gerasmos Safari Lodge", to: "Luangwa Feira Day Secondary School", distance: 3.1 },
      { from: "Luangwa Feira Day Secondary School", to: "Justifeli Lodge", distance: 2.2 },
      { from: "Luangwa main sda churh", to: "Justifeli Lodge", distance: 0.9 },
      { from: "Luangwa District Education Board Offices", to: "Justifeli Lodge", distance: 2.0 },
      { from: "Luangwa Feira Day Secondary School", to: "yellow shop", distance: 3.3 },
      { from: "Luangwa Feira Day Secondary School", to: "Zambia Electricity Supply Corporation", distance: 2.0 },
      { from: "yellow shop", to: "JB THREE BOARDERS MALL", distance: 0.45 },
      { from: "yellow shop", to: "Luangwa Indeco", distance: 0.45 },
      { from: "yellow shop", to: "Luangwa main sda churh", distance: 0.70 },
      { from: "Luangwa main sda churh", to: "Zambia Electricity Supply Corporation", distance: 0.65 },
      { from: "Luangwa District Hospital", to: "Zambia Electricity Supply Corporation", distance: 2.8 },
      { from: "Luangwa Feira Day Secondary School", to: "Big 2 Zambezi Water Front Resort & Safari", distance: 4.0 },
      { from: "Luangwa Feira Day Secondary School", to: "Katondwe Mission Hospital", distance: 48 },
      { from: "Katondwe Mission Hospital", to: "Mwavi Secondary School", distance: 7.2 },
      { from: "Mwavi Secondary School", to: "Luangwa Bridge Market", distance: 27.3 },
      { from: "Mwavi Secondary School", to: "Chitope", distance: 1.1 },
      { from: "Chitope", to: "Luangwa Secondary School", distance: 14 },
      { from: "Luangwa Bridge Market", to: "Luangwa Bridge", distance: 12.7 }
    ];

    // DOM Elements
    const originSelect = document.getElementById('gm-origin');
    const destinationSelect = document.getElementById('gm-destination');
    const calculateBtn = document.getElementById('calculate-btn');
    const mapBtn = document.getElementById('map-btn');
    const mapBtnLabel = document.getElementById('map-btn-label');
    const mapContainer = document.getElementById('mapContainer');
    const summaryTableContainer = document.getElementById('summary-table-container');
    const submitStatusDiv = document.getElementById('submit-status');
    const loader = document.getElementById('loader');
    
    // Trip Share Elements
    const shareTripBtn = document.getElementById('share-trip-btn');
    const shareOptionsContainer = document.getElementById('share-options-container');
    const shareSmsBtn = document.getElementById('share-sms-btn');
    const shareWhatsappBtn = document.getElementById('share-whatsapp-btn');
    
    let summaryData = null;

    // Populate dropdowns on page load
    function populateDropdowns() {
      const defaultOptionOrigin = document.createElement('option');
      defaultOptionOrigin.value = "";
      defaultOptionOrigin.textContent = "Select...";
      defaultOptionOrigin.disabled = true;
      defaultOptionOrigin.selected = true;
      originSelect.appendChild(defaultOptionOrigin);

      const defaultOptionDestination = document.createElement('option');
      defaultOptionDestination.value = "";
      defaultOptionDestination.textContent = "Select...";
      defaultOptionDestination.disabled = true;
      defaultOptionDestination.selected = true;
      destinationSelect.appendChild(defaultOptionDestination);

      const sortedPlaces = places.slice().sort();
      sortedPlaces.forEach(place => {
        const option1 = document.createElement('option');
        option1.value = place;
        option1.textContent = place;
        originSelect.appendChild(option1);

        const option2 = document.createElement('option');
        option2.value = place;
        option2.textContent = place;
        destinationSelect.appendChild(option2);
      });
    }

    // Graph Functions (Dijkstra-like algorithm)
    function buildGraph(segments) {
      const graph = {};
      segments.forEach(seg => {
        if (!graph[seg.from]) graph[seg.from] = [];
        if (!graph[seg.to]) graph[seg.to] = [];
        graph[seg.from].push({ place: seg.to, distance: seg.distance });
        graph[seg.to].push({ place: seg.from, distance: seg.distance });
      });
      return graph;
    }

    function findShortestDistance(from, to, segments) {
      const graph = buildGraph(segments);
      if (!graph[from] || !graph[to]) return null;
      const distances = {};
      const visited = new Set();
      places.forEach(place => distances[place] = Infinity);
      distances[from] = 0;
      let queue = [{ place: from, dist: 0 }];
      while (queue.length > 0) {
        queue.sort((a, b) => a.dist - b.dist);
        const { place, dist } = queue.shift();
        if (place === to) return dist;
        if (visited.has(place)) continue;
        visited.add(place);
        for (let neighbor of (graph[place] || [])) {
          if (dist + neighbor.distance < distances[neighbor.place]) {
            distances[neighbor.place] = dist + neighbor.distance;
            queue.push({ place: neighbor.place, dist: distances[neighbor.place] });
          }
        }
      }
      return null;
    }

    // Event Handlers
    function updateSummaryTable() {
      const origin = originSelect.value;
      const destination = destinationSelect.value;
      const customerPhone = document.getElementById('customer-phone').value.trim();

      // Reset state
      summaryTableContainer.innerHTML = '';
      shareOptionsContainer.style.display = 'none';
      summaryData = null;
      submitStatusDiv.innerHTML = '';

      // Validation
      if (!origin || !destination || origin === destination) {
        displayStatus('Please select different origin and destination points.', 'failed');
        return false;
      }
      
      if (!customerPhone.match(/^0[0-9]{9}$/)) {
        displayStatus('Please enter a valid phone number in the format 09XXXXXXXX.', 'failed');
        return false;
      }

      const vehicleRadio = document.getElementById('mode-vehicle');
      const motorbikeRadio = document.getElementById('mode-motorbike');
      if (!vehicleRadio.checked && !motorbikeRadio.checked) {
        displayStatus('Please select a mode of transport.', 'failed');
        return false;
      }

      const mode = vehicleRadio.checked ? 'Vehicle' : 'Motorbike';
      const pricePer3Km = vehicleRadio.checked ? config.vehiclePricePer3Km : config.motorbikePricePer3Km;

      const distance = findShortestDistance(origin, destination, segments);
      if (distance === null || isNaN(distance)) {
        displayStatus('A route could not be found between the selected places.', 'failed');
        return false;
      }

      const timeHours = distance / config.avgSpeed;
      const wholeHours = Math.floor(timeHours);
      const minutes = Math.round((timeHours - wholeHours) * 60);
      const price = Math.ceil(distance / 3) * pricePer3Km;
      let timeText = '';
      if (wholeHours > 0) {
        timeText += `${wholeHours} hr`;
        if (minutes > 0) timeText += ` ${minutes} min`;
      } else {
        timeText += `${minutes} min`;
      }
      
      // Update UI with summary data
      const tableHTML = `
        <table class="summary-table">
          <thead>
            <tr>
              <th>Mode</th>
              <th>Phone</th>
              <th>From</th>
              <th>To</th>
              <th>Distance (km)</th>
              <th>Time</th>
              <th>Price (K)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>${mode}</td>
              <td>${customerPhone}</td>
              <td>${origin}</td>
              <td>${destination}</td>
              <td>${distance.toFixed(2)}</td>
              <td>${timeText}</td>
              <td><b>K${price}</b></td>
            </tr>
          </tbody>
        </table>
      `;
      summaryTableContainer.innerHTML = tableHTML;
      
      // Store summary data
      summaryData = {
        preferredMode: mode,
        phone: customerPhone,
        from: origin,
        to: destination,
        distance: distance.toFixed(2),
        estimatedTime: timeText,
        price: price
      };

      displayStatus('Trip details calculated. Click the share button to send your request.', 'success');

      return true;
    }
    
    function toggleTripShareOptions() {
      if (!summaryData) {
        displayStatus('No trip details to share. Please calculate the trip first.', 'failed');
        return;
      }
      
      if (shareOptionsContainer.style.display === 'flex') {
        shareOptionsContainer.style.display = 'none';
        submitStatusDiv.innerHTML = '';
      } else {
        shareOptionsContainer.style.display = 'flex';
        displayStatus('Click a button to share trip details!', 'success');
      }
    }
    
    function toggleMap() {
      const origin = originSelect.value;
      const destination = destinationSelect.value;
      const frame = document.getElementById('google-map-frame');

      if (mapContainer.style.display === 'none' || mapContainer.style.display === '') {
        if (!origin || !destination) {
          alert('Please select both origin and destination.');
          return;
        }
        const mapUrl = `${config.googleMapsBaseUrl}${encodeURIComponent(origin)}+to+${encodeURIComponent(destination)}&output=embed`;
        frame.src = mapUrl;
        mapContainer.style.display = 'block';
        mapBtnLabel.textContent = 'Hide Map';
        mapBtn.title = 'Hide Map';
        mapContainer.scrollIntoView({ behavior: 'smooth' });
      } else {
        mapContainer.style.display = 'none';
        mapBtnLabel.textContent = 'Show Map';
        mapBtn.title = 'Show Map';
      }
    }

    function shareTripDetails(method) {
      if (!summaryData) {
        displayStatus('No trip details to share. Please calculate the trip first.', 'failed');
        return;
      }
      
      const tripDetails = `Trip: ${summaryData.from} to ${summaryData.to}, Mode: ${summaryData.preferredMode}, Phone: ${summaryData.phone}, Distance: ${summaryData.distance}km, Time: ${summaryData.estimatedTime}, Price: K${summaryData.price}. Book your ride now: ${config.shareLinkUrl}`;
      
      loader.style.display = 'inline-block';

      if (method === 'sms') {
        window.location.href = `sms:${config.smsNumber}?body=${encodeURIComponent(tripDetails)}`;
      } else if (method === 'whatsapp') {
        window.open(`https://api.whatsapp.com/send?phone=${config.whatsappNumber}&text=${encodeURIComponent(tripDetails)}`, '_blank');
      }

      loader.style.display = 'none';
      displayStatus(`Trip details sent via ${method.toUpperCase()}!`, 'success');
      
      setTimeout(() => {
        submitStatusDiv.innerHTML = '';
        shareOptionsContainer.style.display = 'none';
      }, 3000);
    }
    
    function displayStatus(message, type) {
      submitStatusDiv.className = `submit-status ${type}`;
      let icon = type === 'success' ? 'check_circle' : 'error';
      submitStatusDiv.innerHTML = `<span class="material-icons">${icon}</span>${message}`;
    }

    // Initializers and Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
      populateDropdowns();
      calculateBtn.addEventListener('click', updateSummaryTable);
      mapBtn.addEventListener('click', toggleMap);
      
      shareTripBtn.addEventListener('click', toggleTripShareOptions);
      shareSmsBtn.addEventListener('click', () => shareTripDetails('sms'));
      shareWhatsappBtn.addEventListener('click', () => shareTripDetails('whatsapp'));
    });
  </script>
</body>
</html>
