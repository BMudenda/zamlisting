<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zamlisting | Transport</title>

  <!-- Fonts & Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#2b6ef6" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-mobile-web-app-title" content="Luangwa Feira Rides" />
  <link rel="apple-touch-icon" href="lfr.jpg" />

  <style>
    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ RESET ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --primary-color: #2563eb;
      --secondary-color: #ff9900;
      --error-color: #dc2626;
      --success-color: #16a34a;
      --bg-color-body: #f5f5f5;
      --bg-color-card: #ffffff;
      --border-color-light: #e0e0e0;
      --font-color-dark: #333;
    }

    body {
      font-family: 'Roboto', Arial, sans-serif;
      background-color: var(--bg-color-body);
      color: var(--font-color-dark);
      line-height: 1.5;
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    header {
      background: var(--primary-color);
      color: white;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }

    /* Logo (top-left corner) */
    .corner-logo {
      position: absolute;
      top: 10px;
      left: 12px;
      width: 32px;
      height: 32px;
      object-fit: contain;
      z-index: 10;
    }

    /* Brand name */
    .company-info h2 {
      font-size: 1.15rem;
      line-height: 1.2;
      padding-left: 48px;          /* space for logo */
      margin: 0;
    }

    .zam {
      font-weight: 800;
      letter-spacing: 0.3px;
    }

    /* Zambia flag colors */
    .z-green  { color: #198754; }
    .z-red    { color: #dc3545; }
    .z-black  { color: #000000; }
    .z-orange { color: #ff9900; }

    .transport-sub {
      display: block;
      font-size: 0.75rem;
      font-weight: 400;
      color: #e5e7eb;
      margin-top: 2px;
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MENU BUTTON & DROPDOWN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    .menu-dropdown-container {
      position: relative;
    }

    .menu-button {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 8px;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
    }

    .menu-dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 44px;
      background-color: white;
      width: 290px;
      max-height: 85vh;
      overflow-y: auto;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25);
      z-index: 1000;
      border-radius: 12px;
      color: #333;
      padding: 16px;
      border: 1px solid #e0e0e0;
    }

    .menu-dropdown.show {
      display: block;
    }

    .dropdown-content-section {
      margin-bottom: 20px;
    }

    .dropdown-content-section h4 {
      color: var(--primary-color);
      border-bottom: 1px solid #f0f0f0;
      padding-bottom: 6px;
      margin-bottom: 10px;
      font-size: 0.95rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .dropdown-content-section p {
      font-size: 0.85rem;
      line-height: 1.5;
      margin-bottom: 10px;
      color: #4b5563;
    }

    .dropdown-content-section a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px;
      text-decoration: none;
      color: #1f2937;
      font-size: 0.9rem;
      border-radius: 8px;
      transition: background 0.2s ease;
      margin-bottom: 2px;
    }

    .dropdown-content-section a:hover {
      background-color: #f3f4f6;
    }

    .dropdown-content-section a i {
      width: 20px;
      color: var(--primary-color);
      text-align: center;
      font-size: 1.1rem;
    }

    .contact-label-text {
      display: flex;
      flex-direction: column;
    }

    .contact-detail-hidden {
      display: none;
      font-size: 0.85rem;
      color: #666;
    }

    .menu-divider {
      height: 1px;
      background: #e5e7eb;
      margin: 12px 0;
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ FORM & UI ELEMENTS (kept from your code) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    .product-container {
      max-width: 500px;
      margin: 15px auto;
      padding: 0 10px;
    }

    .booking-container {
      background: var(--bg-color-card);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 15px;
    }

    fieldset {
      border: 1px solid var(--border-color-light);
      border-radius: 10px;
      padding: 12px;
      background: #fafafa;
      margin-bottom: 15px;
      width: 100%;
    }

    legend {
      font-weight: bold;
      color: var(--primary-color);
      padding: 0 8px;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .input-box {
      background: white;
      border: 1.5px solid var(--border-color-light);
      border-radius: 8px;
      padding: 10px;
      transition: 0.3s;
      position: relative;
      display: flex;
      align-items: center;
      width: 100%;
    }

    .input-box .material-icons {
      color: var(--primary-color);
      font-size: 20px;
      margin-right: 10px;
    }

    .input-box input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 1rem;
      font-weight: bold;
      background: transparent;
    }

    input::placeholder {
      font-size: 0.8rem;
      font-style: italic;
      color: #999;
      font-weight: normal;
    }

    .submit-btn {
      background: var(--primary-color);
      color: white;
      width: 65px;
      height: 65px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: 0.3s;
    }

    .btn-loader {
      width: 28px;
      height: 28px;
      border: 3px solid rgba(255,255,255,0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      display: none;
    }

    @keyframes spin {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Add more of your later styles here as needed */
  </style>
</head>

<body>

<header>
  <div class="header-content">

    <!-- Brand -->
    <div class="company-info">
      <h2>
        <span class="zam">
          <span class="z-green">Z</span><span class="z-red">a</span><span class="z-black">m</span><span class="z-orange">L</span>isting
        </span>
        <span class="transport-sub">üèçÔ∏èüöó Transport</span>
      </h2>
    </div>

    <!-- Menu -->
    <div class="menu-dropdown-container">
      <button id="menu-toggle-btn" class="menu-button" title="Menu">
        <i class="fas fa-ellipsis-v"></i>
      </button>

      <div id="header-menu-dropdown" class="menu-dropdown">

        <div class="dropdown-content-section">
          <h4><i class="fas fa-info-circle"></i> About Our Service</h4>
          <p><strong>Location:</strong> Dedicated service provider within the Luangwa and Luanshya District area and surrounding locations in Zambia.</p>
          <p><strong>Affordable:</strong> Pricing is <strong>cheap and fixed as shown</strong>, calculated fairly based on distance.</p>
          <p><strong>Reliable:</strong> We are committed to <strong>reliable and safe transport</strong>, ensuring you reach your destination efficiently.</p>
          <p>
            <strong>Stations:</strong><br>
            Luangwa: Bus Station, Chitope, Luangwa Market Bridge<br>
            Luanshya: Mpatamatu, Roan Station, Luanshya Town ‚Äî<br>
            (more nearby hubs coming soon)
          </p>
        </div>

        <div class="dropdown-content-section">
          <h4><i class="fas fa-headset"></i> Quick Contact</h4>
          <p style="margin-bottom: 10px;"><strong>For inquiries or collaborations:</strong></p>

          <a href="mailto:zamlisting@gmail.com">
            <i class="fas fa-envelope"></i>
            <span class="contact-label-text">Email <span class="contact-detail-hidden">zamlisting@gmail.com</span></span>
          </a>

          <a href="tel:+260966423229">
            <i class="fas fa-phone"></i>
            <span class="contact-label-text">Call <span class="contact-detail-hidden">0966 423 229</span></span>
          </a>

          <a href="https://wa.me/260966423229" target="_blank">
            <i class="fab fa-whatsapp"></i>
            <span class="contact-label-text">WhatsApp <span class="contact-detail-hidden">+260 966 423 229</span></span>
          </a>

          <a href="sms:+260966423229">
            <i class="fas fa-sms"></i>
            <span class="contact-label-text">SMS <span class="contact-detail-hidden">0966 423 229</span></span>
          </a>

          <div class="menu-divider"></div>

          <a href="https://www.facebook.com/profile.php?id=61581247756569" target="_blank">
            <i class="fab fa-facebook"></i> Facebook Page
          </a>

          <a href="https://www.tiktok.com/@luagwa_feira_rides" target="_blank">
            <i class="fab fa-tiktok"></i> TikTok
          </a>

          <p style="margin-top: 20px; text-align: center; font-size: 0.75rem; color: #888;">
            ¬© 2024 Luangwa Feira Rides
          </p>
        </div>

      </div>
    </div>

    <!-- Corner logo -->
    <img src="lfr.jpg" alt="Luangwa Feira Rides Logo" class="corner-logo">

  </div>
</header>

<script>
// Toggle dropdown
document.getElementById('menu-toggle-btn').addEventListener('click', function(e) {
  e.stopPropagation();
  document.getElementById('header-menu-dropdown').classList.toggle('show');
});

// Close when clicking outside
document.addEventListener('click', function(e) {
  const dropdown = document.getElementById('header-menu-dropdown');
  if (!e.target.closest('.menu-dropdown-container')) {
    dropdown.classList.remove('show');
  }
});
</script>



  
</header>

  <main class="product-container">
    <div class="booking-container">
      <fieldset>
        <legend><span class="material-icons">account_circle</span> Login</legend>
        <div class="input-box" id="phone-box">
          <span class="material-icons">phone</span>
          <input type="tel" id="customer-phone" maxlength="10" placeholder="Enter phone number to login eg 0xxxxxxxxx" inputmode="numeric">
        </div>
      </fieldset>

      <div id="trip-details" class="hidden-section">
        <fieldset id="mode-fieldset">
          <legend><span class="material-icons">commute</span> Transport Mode</legend>
          <div id="mode-group" style="display:flex; justify-content:space-around; padding:10px 0;">
            <label class="mode-option">
              <input type="radio" name="mode" value="motorbike">
              <span class="material-icons">motorcycle</span>
              <small>Motorbike</small>
            </label>
            <label class="mode-option">
              <input type="radio" name="mode" value="vehicle">
              <span class="material-icons">directions_car</span>
              <small>Vehicle</small>
            </label>
          </div>
        </fieldset>

        <fieldset id="route-fieldset">
          <legend>Route</legend>
          <div class="input-box" id="origin-container" style="margin-bottom:12px;">
            <span class="material-icons">my_location</span>
            <input type="text" id="gm-origin" placeholder="Where should we pick you up?" autocomplete="off">
            <div id="originList" class="autocomplete-list"></div>
          </div>
          <div class="input-box" id="dest-container">
            <span class="material-icons">pin_drop</span>
            <input type="text" id="gm-destination" placeholder="Where are you going?" autocomplete="off">
            <div id="destinationList" class="autocomplete-list"></div>
          </div>
        </fieldset>
      </div>

      <div id="summary-section" class="hidden-section">
        <fieldset>
          <legend>
            <span class="material-icons">receipt_long</span> Trip Summary
            <span class="tooltip-container">
              <span class="material-icons tooltip-icon">help_outline</span>
              <span class="tooltip-text" id="hub-tooltip">Calculated via nearest hub</span>
            </span>
          </legend>
          <div id="summary-cards"></div>
        </fieldset>
        <div style="display:flex; flex-direction:column; align-items:center; margin-top:20px;">
          <button class="submit-btn" id="submit-btn">
            <i class="fas fa-paper-plane" id="btn-icon"></i>
            <div class="btn-loader" id="btn-loader"></div>
          </button>
          <p id="action-label" style="margin-top:8px; font-weight:bold; color:var(--primary-color);">Request Now</p>
        </div>
      </div>

      <div class="calc-loader" id="spinner"></div>
      <p id="status" style="text-align:center; margin-top:10px; font-weight:bold; min-height:1.2em;"></p>
    </div>
  </main>

  <script>
    // --- RESTORED INSTALL LOGIC ---
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", function() {
        navigator.serviceWorker.register("sw.js").then(
          function(reg) { console.log("ServiceWorker registered"); },
          function(err) { console.log("ServiceWorker registration failed:", err); }
        );
      });
    }

    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      const deferredPrompt = e;
      const installBox = document.createElement("div");
      installBox.style.position = "fixed";
      installBox.style.top = "15px";
      installBox.style.right = "15px";
      installBox.style.background = "#2b6ef6";
      installBox.style.color = "#fff";
      installBox.style.borderRadius = "8px";
      installBox.style.padding = "8px 14px";
      installBox.style.fontFamily = "system-ui, sans-serif";
      installBox.style.fontSize = "14px";
      installBox.style.cursor = "pointer";
      installBox.style.boxShadow = "0 3px 8px rgba(0,0,0,0.2)";
      installBox.style.zIndex = "9999";
      installBox.style.display = "flex";
      installBox.style.alignItems = "center";
      installBox.style.gap = "8px";
      installBox.innerHTML = `<span id="installText">Install App</span><span id="closeInstall" style="cursor:pointer;font-weight:bold;margin-left:5px;">√ó</span>`;
      document.body.appendChild(installBox);

      document.getElementById("installText").addEventListener("click", async () => {
        installBox.remove();
        deferredPrompt.prompt();
      });
      document.getElementById("closeInstall").addEventListener("click", () => { installBox.remove(); });
    });

    // --- DROPDOWN & MENU ---
    function toggleDropdown() {
      const menu = document.getElementById("header-menu-dropdown");
      menu.classList.toggle("show");
    }

    window.onclick = function(event) {
      const menu = document.getElementById("header-menu-dropdown");
      const btn = document.getElementById("menu-toggle-btn");
      if (menu && menu.classList.contains('show')) {
        if (!menu.contains(event.target) && !btn.contains(event.target)) {
          menu.classList.remove('show');
        }
      }
    }

    // --- CONFIG & DATA ---
    const config = {
      vehiclePricePerKm: 3.00,
      motorbikePricePerKm: 1.02,
      vehicleMinPrice: 20,
      motorbikeMinPrice: 10,
      vehicleExtra: 6.00,      
      motorbikeExtra: 2.04,    
      avgSpeed: 60
    };

    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxpvhvgnjkRcZmuly7uNzPeAC5OwVUq8-qUJ2WXrOqOnSsNgCn0ZHbuz6BGslW83_rB5Q/exec";
    const places = [
  // =======================
  // LUANGWA PLACES
  // =======================
 "Anglican Church,Luangwa",
  "Airstrip,Luangwa",

  "Big 2 Zambezi Water Front Resort & Safari, Luangwa",
  "BM Residence, Luangwa",
  "Boma Clinic, Luangwa",
  "Chidada Ground, Luangwa",
  "Car Wash Pub, Luangwa",
  "Chitope, Luangwa",
  "Chitope Rural Health Centre, Luangwa",
  "Chilombwe Community School, Luangwa",
  "Chiriwe Primary School, Luangwa",
  "Dzalo Skills Training Centre Kambolozo, Luangwa",
  "Feira Kindom Hall, Luangwa",
  "Feira Day Secondary School, Luangwa",
  "Gerasmos Safari Lodge, Luangwa",

  "Hill View Pub, Luangwa",
  "JB Three Boarders Mall, Luangwa",
  "JB Three Boarders Club, Luangwa",
  "Justifeli Lodge, Luangwa",
  "Kakaro Primary School, Luangwa",
  "Kakaro Liberation Heritage Site, Luangwa",
  "Kantuleni Executive Lodge, Luangwa",
  "Kapoche, Luangwa",
  "Kaunga Secondary School, Luangwa",
  "Kasinsa, Luangwa",
  "Katondwe Chapel, Luangwa",
  "Katondwe Chaz Hotel, Luangwa",
  "Katondwe Dam, Luangwa",
  "Katondwe Girls Secondary School, Luangwa",
  "Katondwe Mission Hospital, Luangwa",
  "Katondwe Primary School, Luangwa",
  "Kavalamanja, Luangwa",
  "Luangwa (Feira)",
  "Luangwa Basic School",
  "Luangwa Bridge",
  "Luangwa Bridge Market",
  "Luangwa Bus Station",
  "Luangwa Council Lodge",
  "District Commissioner,Luangwa",
  "District Education Board Secretary,Luangwa",
  "Luangwa District Hospital",
  "Luangwa High School Police Post",
  "Boma Filling Station, Luangwa",
  "Luangwa Harbour",
  "Indeco Building, Luangwa",
  "Luangwa Market",
  "Luangwa Main SDA Church",
  "Mburuma Local Court, Luangwa",
  "Luangwa Police Station",
  "Luangwa Post Office",
  "Luangwa Town Council",
  "Luangwa Secondary School",
  "Makichilo Lodge, Luangwa",
  "Mwavi Secondary School, Luangwa",
  "Mwalila Primary School, Luangwa",
  "Nyabota Lodge, Luangwa",
  "Passover Living Lamb Ministry Katondwe, Luangwa",
  "Pentecostal Assembly of God Joshua Assembly, Luangwa",

  "UCZ Feira, Luangwa",
  "Soweto Junction, Luangwa",

  "National Registration Office,Luangwa",
  "River Spot Club, Luangwa",
  "SDA Katondwe, Luangwa",
  "Yangoma Lodge, Luangwa",
  "Yellow Shop,Luangwa",
  "Zambia Electricity Supply Corparation,Luangwa",

  "Zambia Revenue Authority ‚Äì Luangwa Customs Services, Luangwa",
  "Feira Gardens, Luangwa",
  "ZICB Luangwa Branch, Luangwa",
  "Luangwa Immigration Border Post, Luangwa",
  "UCZ Feira, Luangwa",
  "Soweto Junction, Luangwa",

  "National Registration Office,Luangwa",
  "River Spot Club, Luangwa",
  "SDA Katondwe, Luangwa",
  "Yangoma Lodge, Luangwa",
  "Yellow Shop,Luangwa",
  "Zambia Electricity Supply Corparation,Luangwa",
 // =======================
  // LUANSHYA PLACES
  // =======================
"Luanshya Town Roundabout",
"Downtown Shopping Centre, Luanshya",
"Nathan Shopping Complex, Luanshya",
"Zambia Electricity Supply Corporation, Luanshya",
"National Registration Office, Luanshya",
"District Education Board Secretary, Luanshya",
"Luanshya Local Court",
"Temple Of The Annunciation, Luanshya",
"Luanshya Skills Training Institute",
"Hellen Kaunda Public Library, Luanshya",
"Luanshya Hindu Hall",
"Bharat Sports Club, Luanshya",
"Zambia Library Service, Luanshya",
"Zambia Police Service, Luanshya",
"Levy Nchito New Police Camp, Luanshya",
"Engen Filling Station, Luanshya",
"FC Chatepa Bakery, Luanshya",
"Luanshya Correction Service",
"Old Cemetery Milemu, Luanshya",
"St. Anthony Catholic Parish, Luanshya",
"Mikomfwa West Adventist Church, Luanshya",
"Fire Baptised Church, Luanshya",
"New Apostolic Church, Luanshya",
"Muchinshi Primary School, Luanshya",
"ETG Luanshya",
"Ndelela Primary School, Luanshya",
"Kingdom Hall Of Jehovah's Witnesses, Luanshya",
"Luanshya Main Seventh Day Adventist Church",
"Temple Baptist Church, Luanshya",
"Mikomfwa Health Centre, Luanshya",
"Reformed Church, Luanshya",
"Mikomfwa Stadium, Luanshya",
"Mama Rosa Primary School, Luanshya",
"Buntungwa Market, Luanshya",
"United Methodist Church, Luanshya",
"Twatemwa Primary School, Luanshya",
"Luanshya Kalala Kingdom Hall of Jehovah's Witnesses",
"UCZ Jordan Congregation, Luanshya",
"Kambilo Mbilo, Luanshya",
"Bethel Centre for the Deaf, Luanshya",
"Malaika Morning Market, Luanshya",
"Malaika Clinic, Luanshya",
"Malaika School, Luanshya",
"Tontozo St Anns Luanshya - Uniturtle",
"Bread Of Life Church, Luanshya",
"Luanshya Central Secondary School",
"9 Clinic, Luanshya",
"Kasims Medical Center, Luanshya",
"Mwatimwa Pub and Grill, Luanshya",
"Luanshya Mine Hospital",
"Roan Rugby Club, Luanshya",
"Golden Age Lodge, Luanshya",
"Luanshya Golf Club",
"Luanshya Trust School",
"Newtown Clinic, Luanshya",
"River Cross Primary and Secondary School, Luanshya",
"Luanshya Golf Course",
"De Home Guest House, Luanshya",
"DaGama Home and School, Luanshya",
"Luanshya Technical and Business College",
"TVTC, Luanshya",
"Luanshya Boys Secondary School",
"Mwetete Executive Lodge, Luanshya",
"Pakawama Lodge, Luanshya",
"Bethsaida Hotels, Luanshya",
"JC Lodge, Luanshya",
"Malaika, Luanshya",
"Ndeke SDA Church, Luanshya",
"Ndeke Market, Luanshya",
"Chibansa Primary School, Luanshya",
"Kamirenda New Apostolic Church, Luanshya",
"Kamirenda Seventh Day Adventist Church, Luanshya",
"Kamirenda Community Clinic, Luanshya",
"Kamirenda Market, Luanshya",
"Roan Mall, Luanshya",
"Luanshya College of Education",
"Thomson District Hospital, Luanshya",
"Luanshya Sports Complex",
"Roan Antelope General Hospital, Luanshya",
"Roan Market, Luanshya",
"Kafubu Stadium, Luanshya",
"Bowas Lodge, Luanshya",
"CLM Luanshya Copper Mines",
"Luanshya Civic Center",
"Niagara Fitment Center & Car Wash, Luanshya",
"Antelope Milling, Luanshya",
"Zamefa, Luanshya",
"Mazzieri Primary School, Luanshya",
"Twashuka Market, Luanshya",
"Mpatamatu Stadium, Luanshya",
"Section 25 Mini Hospital, Luanshya",
"Mpatamatu Secondary School, Luanshya",
"Mpatamatu Primary School, Luanshya",
"Mpatamatu Police Station, Luanshya",
"Mpatamatu Main SDA Church, Luanshya",
"Mpatamatu South SDA, Luanshya",
"Mpatamatu Reformed Church in Zambia, Luanshya",
"Mpatamatu Bus Stop, Luanshya",
"Makoma Dam, Luanshya",
"Beracah Gardens, Luanshya",
"Fisenge High School, Luanshya",
"Fisenge Seventh Day Adventist Church, Luanshya",
"Fisenge Mosque, Luanshya",
"Lowden Lodge, Luanshya",
"Mubende Country Lodge, Luanshya",
"Cholwa Guest House, Luanshya",
"Luanshya Junction Market",
"Pleasure Given Garden, Luanshya",
"Baluba Market, Luanshya",
"Misaka SDA Church, Luanshya",
"Copperstone University Zambezi Hostel, Luanshya",
"CSMM Fueling Station, Luanshya",
"Jon Ken, Luanshya",
"CEC 220KV Maposa Substation, Luanshya",
"Maposa, Luanshya",

];

    const segments = [

// =======================

// Town core street-level adjacency
{ from: "Luangwa Market", to: "Luangwa Bus Station", distance: 0.1 },
{ from: "Luangwa Market", to: "Makichilo Lodge, Luangwa", distance: 0.4 },
{ from: "Makichilo Lodge, Luangwa", to: "Gerasmos Safari Lodge, Luangwa", distance: 0.3 },
{ from: "Makichilo Lodge, Luangwa", to: "UCZ Feira, Luangwa", distance: 0.5 },
{ from: "UCZ Feira, Luangwa", to: "Pentecostal Assembly of God Joshua Assembly, Luangwa", distance: 0.08 },
{ from: "Zambia Electricity Supply Corparation,Luangwa", to: "Luangwa Main SDA Church", distance: 0.65 },
{ from: "Luangwa Main SDA Church", to: "Indeco Building, Luangwa", distance: 0.7 },
{ from: "Indeco Building, Luangwa", to: "JB Three Boarders Club, Luangwa", distance: 0.1 },
{ from: "JB Three Boarders Club, Luangwa", to: "Yellow Shop,Luangwa", distance: 0.45 },
{ from: "Yellow Shop,Luangwa", to: "Luangwa Bus Station", distance: 0.19 },
{ from: "Luangwa Bus Station", to: "JB Three Boarders Mall, Luangwa", distance: 0.24 },
{ from: "JB Three Boarders Mall, Luangwa", to: "Boma Filling Station, Luangwa", distance: 0.35 },
{ from: "Boma Filling Station, Luangwa", to: "Kantuleni Executive Lodge, Luangwa", distance: 0.19 },
{ from: "Kantuleni Executive Lodge, Luangwa", to: "Luangwa Harbour", distance: 0.09 },
{ from: "Kantuleni Executive Lodge, Luangwa", to: "Luangwa Council Lodge", distance: 0.09 },
{ from: "Luangwa Council Lodge", to: "District Commissioner,Luangwa", distance: 0.3 },
{ from: "District Commissioner,Luangwa", to: "Luangwa Police Station", distance: 0.3 },
{ from: "Luangwa Police Station", to: "District Education Board Secretary,Luangwa", distance: 0.1 },
{ from: "District Education Board Secretary,Luangwa", to: "Yangoma Lodge, Luangwa", distance: 0.4 },
{ from: "District Commissioner,Luangwa", to: "Luangwa Post Office", distance: 0.1 },     
{ from: "Yangoma Lodge, Luangwa", to: "Boma Clinic, Luangwa", distance: 0.5 },
{ from: "JB Three Boarders Mall, Luangwa", to: "Nyabota Lodge, Luangwa", distance: 0.25 },
{ from: "Nyabota Lodge, Luangwa", to: "Luangwa Basic School", distance: 0.18 },
{ from: "JB Three Boarders Mall, Luangwa", to: "River Spot Club, Luangwa", distance: 0.03 },
// Townwn council seg connector with Lua Bus Station
{ from: "Luangwa Town Council", to: "Luangwa Bus Station", distance: 2.16 },
// Town council corridor
{ from: "Luangwa Town Council", to: "National Registration Office,Luangwa", distance: 0.49 },
{ from: "Luangwa Town Council", to: "Dzalo Skills Training Centre Kambolozo, Luangwa", distance: 0.6 },
{ from: "Luangwa Town Council", to: "Big 2 Zambezi Water Front Resort & Safari, Luangwa", distance: 3.2 },
{ from: "Registration Office", to: "Chidada Ground, Luangwa", distance: 0.49 },
{ from: "Chidada Ground, Luangwa", to: "Yangoma Lodge, Luangwa", distance: 2.34 },
{ from: "Luangwa Town Council", to: "Hill View Pub, Luangwa", distance: 0.4 },
{ from: "Hill View Pub, Luangwa", to: "BM Residence, Luangwa", distance: 1.0 },
{ from: "BM Residence, Luangwa", to: "Feira Day Secondary School, Luangwa", distance: 1.1 },

// Feira corridor
{ from: "Feira Kindom Hall, Luangwa", to: "Anglican Church,Luangwa", distance: 0.08 },
{ from: "Feira Kindom Hall, Luangwa", to: "Luangwa (Feira)", distance: 0.7 },
{ from: "Luangwa (Feira)", to: "Luangwa Bus Station", distance: 0.1 },

// Soweto cluster
{ from: "Soweto Junction, Luangwa", to: "Luangwa Bus Station", distance: 2.39 },
{ from: "Luangwa District Hospital", to: "Soweto Junction, Luangwa", distance: 2.5 },
{ from: "Soweto Junction, Luangwa", to: "Airstrip,Luangwa", distance: 1.7 },
{ from: "Luangwa Bus Station", to: "Airstrip,Luangwa", distance: 3.5 },
{ from: "Soweto Junction, Luangwa", to: "Zambia Electricity Supply Corparation,Luangwa", distance: 0.3 },
{ from: "Soweto Junction, Luangwa", to: "Car Wash Pub, Luangwa", distance: 1.25 },
{ from: "Car Wash Pub, Luangwa", to: "Luangwa Town Council", distance: 1.0 },
{ from: "Car Wash Pub, Luangwa", to: "BM Residence, Luangwa", distance: 1.0 },
{ from: "Luangwa Bus Station", to: "BM Residence, Luangwa", distance: 2.2 },

// Big 2 ‚Üí Chilombwe corridor
{ from: "Big 2 Zambezi Water Front Resort & Safari, Luangwa", to: "Luangwa Bus Station", distance: 4.1 },
{ from: "Big 2 Zambezi Water Front Resort & Safari, Luangwa", to: "Chilombwe Community School, Luangwa", distance: 9.8 },

// Chitope corridor
{ from: "Chitope, Luangwa", to: "Luangwa Bus Station", distance: 62.7 },
{ from: "Chitope, Luangwa", to: "Mwavi Secondary School, Luangwa", distance: 1.1 },
{ from: "Mwavi Secondary School, Luangwa", to: "Chitope Rural Health Centre, Luangwa", distance: 2.0 },
{ from: "Chitope Rural Health Centre, Luangwa", to: "Mwalila Primary School, Luangwa", distance: 6.0 },
{ from: "Mwalila Primary School, Luangwa", to: "Kaunga Secondary School, Luangwa", distance: 5.0 },
{ from: "Chitope, Luangwa", to: "Kasinsa, Luangwa", distance: 10.0 },
{ from: "Kasinsa, Luangwa", to: "Luangwa Secondary School", distance: 14.0 },

// Kapoche ‚Üí Bridge corridor
{ from: "Luangwa Secondary School", to: "Luangwa Bus Station", distance: 47.8 },
{ from: "Kapoche, Luangwa", to: "Luangwa Secondary School", distance: 21.0 },
{ from: "Luangwa Secondary School", to: "Luangwa High School Police Post", distance: 0.8 },
{ from: "Luangwa High School Police Post", to: "Chiriwe Primary School, Luangwa", distance: 2.1 },
{ from: "Luangwa High School Police Post", to: "SDA Katondwe, Luangwa", distance: 1.0 },
{ from: "Luangwa Secondary School", to: "Katondwe Mission Hospital, Luangwa", distance: 5.0 },
{ from: "Katondwe Mission Hospital, Luangwa", to: "Katondwe Primary School, Luangwa", distance: 0.55 },
{ from: "Katondwe Chapel, Luangwa", to: "Katondwe Primary School, Luangwa", distance: 0.05 },
{ from: "Katondwe Primary School, Luangwa", to: "Katondwe Girls Secondary School, Luangwa", distance: 0.0 },
{ from: "Katondwe Girls Secondary School, Luangwa", to: "Katondwe Chaz Hotel, Luangwa", distance: 0.45 },
{ from: "Katondwe Chaz Hotel, Luangwa", to: "Passover Living Lamb Ministry Katondwe, Luangwa", distance: 0.4 },
{ from: "Passover Living Lamb Ministry Katondwe, Luangwa", to: "Katondwe Dam, Luangwa", distance: 0.1 },

// Bridge corridor
{ from: "Luangwa Bridge", to: "Luangwa Bus Station", distance: 87.1 },
{ from: "Luangwa Bridge Market", to: "Luangwa Bridge", distance: 3.0 },

// Kakaro corridor
{ from: "Kakaro Primary School, Luangwa", to: "Luangwa Bus Station", distance: 10.8 },
{ from: "Kakaro Primary School, Luangwa", to: "Kakaro Liberation Heritage Site, Luangwa", distance: 1.2 },
{ from: "Kakaro Primary School, Luangwa", to: "Luangwa District Hospital", distance: 7.1 },

// D145 Customs corridor_revised
{ from: "Zambia Revenue Authority ‚Äì Luangwa Customs Services, Luangwa", to: "Feira Gardens, Luangwa", distance: 0.7 },
{ from: "Feira Gardens, Luangwa", to: "ZICB Luangwa Branch, Luangwa", distance: 0.85 },
{ from: "ZICB Luangwa Branch, Luangwa", to: "Luangwa Immigration Border Post, Luangwa", distance: 0.28 },
{ from: "Luangwa Immigration Border Post, Luangwa", to: "Yellow Shop,Luangwa", distance: 1.4 },
{ from: "Luangwa Immigration Border Post, Luangwa", to: "District Commissioner,Luangwa", distance: 0.5 },
{ from: "Feira Gardens, Luangwa", to: "Luangwa Bus Station", distance: 0.6 },

// Kavalamanja corridor
{ from: "Kavalamanja, Luangwa", to: "Luangwa Bus Station", distance: 21.0 },

  // =======================
  // LUANSHYA SEGMENTS
  // =======================// =======================
    // --- Cluster 1: Downtown ‚Üí Police Corridor ---
// --- Cluster 1: Downtown ‚Üí Police Corridor ---
{ from: "Luanshya Town Roundabout", to: "Downtown Shopping Centre, Luanshya", distance: 0.10 },
{ from: "Downtown Shopping Centre, Luanshya", to: "Nathan Shopping Complex, Luanshya", distance: 0.05 },
{ from: "Nathan Shopping Complex, Luanshya", to: "Zambia Electricity Supply Corporation, Luanshya", distance: 0.08 },
{ from: "Zambia Electricity Supply Corporation, Luanshya", to: "National Registration Office, Luanshya", distance: 0.25 },
{ from: "National Registration Office, Luanshya", to: "District Education Board Secretary, Luanshya", distance: 0.60 },
{ from: "District Education Board Secretary, Luanshya", to: "Luanshya Local Court", distance: 0.30 },
{ from: "Luanshya Local Court", to: "Temple Of The Annunciation, Luanshya", distance: 0.06 },
{ from: "Temple Of The Annunciation, Luanshya", to: "Luanshya Skills Training Institute", distance: 0.18 },
{ from: "Luanshya Skills Training Institute", to: "Hellen Kaunda Public Library, Luanshya", distance: 0.35 },
{ from: "Hellen Kaunda Public Library, Luanshya", to: "Luanshya Hindu Hall", distance: 0.09 },
{ from: "Luanshya Hindu Hall", to: "Bharat Sports Club, Luanshya", distance: 0.20 },
{ from: "Bharat Sports Club, Luanshya", to: "Zambia Library Service, Luanshya", distance: 0.27 },
{ from: "Zambia Library Service, Luanshya", to: "Zambia Police Service, Luanshya", distance: 0.22 },
{ from: "Zambia Police Service, Luanshya", to: "Levy Nchito New Police Camp, Luanshya", distance: 0.55 },
{ from: "Levy Nchito New Police Camp, Luanshya", to: "Engen Filling Station, Luanshya", distance: 0.30 },
{ from: "Engen Filling Station, Luanshya", to: "FC Chatepa Bakery, Luanshya", distance: 0.28 },
{ from: "FC Chatepa Bakery, Luanshya", to: "Luanshya Correction Service", distance: 1.20 },
{ from: "Luanshya Correction Service", to: "Old Cemetery Milemu, Luanshya", distance: 0.20 },
{ from: "Old Cemetery Milemu, Luanshya", to: "St. Anthony Catholic Parish, Luanshya", distance: 0.28 },

// --- Cluster 2: Muchinshi ‚Üí Ndelela ‚Üí Mikomfwa Corridor ---
{ from: "Luanshya Town Roundabout", to: "Muchinshi Primary School, Luanshya", distance: 2.9 },
{ from: "Luanshya Town Roundabout", to: "Ndelela Primary School, Luanshya", distance: 2.6 },
{ from: "Luanshya Town Roundabout", to: "Mikomfwa Stadium, Luanshya", distance: 2.9 },
{ from: "Luanshya Town Roundabout", to: "Mama Rosa Primary School, Luanshya", distance: 4.3 },
{ from: "Luanshya Town Roundabout", to: "Twatemwa Primary School, Luanshya", distance: 3.7 },
{ from: "Luanshya Town Roundabout", to: "Kambilo Mbilo, Luanshya", distance: 5.4 },
{ from: "St. Anthony Catholic Parish, Luanshya", to: "Muchinshi Primary School, Luanshya", distance: 0.75 },
{ from: "Muchinshi Primary School, Luanshya", to: "ETG Luanshya", distance: 1.70 },
{ from: "ETG Luanshya", to: "Ndelela Primary School, Luanshya", distance: 2.00 },
{ from: "Ndelela Primary School, Luanshya", to: "Kingdom Hall of Jehovah's Witnesses, Luanshya", distance: 0.40 },
{ from: "Kingdom Hall of Jehovah's Witnesses, Luanshya", to: "Luanshya Main SDA Church", distance: 0.80 },
{ from: "Luanshya Main SDA Church", to: "Temple Baptist Church, Luanshya", distance: 0.12 },
{ from: "Temple Baptist Church, Luanshya", to: "Mikomfwa Health Centre, Luanshya", distance: 0.24 },
{ from: "Mikomfwa Health Centre, Luanshya", to: "Reformed Church, Luanshya", distance: 0.60 },
{ from: "Reformed Church, Luanshya", to: "Mikomfwa Stadium, Luanshya", distance: 0.40 },
{ from: "Mikomfwa Stadium, Luanshya", to: "Mama Rosa Primary School, Luanshya", distance: 1.20 },
{ from: "Mama Rosa Primary School, Luanshya", to: "Buntungwa Market, Luanshya", distance: 0.45 },
{ from: "Buntungwa Market, Luanshya", to: "United Methodist Church, Luanshya", distance: 1.10 },
{ from: "Mikomfwa Stadium, Luanshya", to: "Twatemwa Primary School, Luanshya", distance: 1.80 },
{ from: "Twatemwa Primary School, Luanshya", to: "Luanshya Kalala Kingdom Hall of Jehovah's Witnesses", distance: 0.50 },
{ from: "Luanshya Kalala Kingdom Hall of Jehovah's Witnesses", to: "UCZ Jordan Congregation, Luanshya", distance: 0.55 },
{ from: "UCZ Jordan Congregation, Luanshya", to: "Kambilo Mbilo, Luanshya", distance: 1.00 },
{ from: "Kambilo Mbilo, Luanshya", to: "Bethel Centre for the Deaf, Luanshya", distance: 0.65 },
{ from: "Bethel Centre for the Deaf, Luanshya", to: "Malaika Morning Market, Luanshya", distance: 0.85 },
{ from: "Malaika Morning Market, Luanshya", to: "Malaika Clinic, Luanshya", distance: 0.60 },
{ from: "Malaika Clinic, Luanshya", to: "Malaika School, Luanshya", distance: 0.70 },

// --- Cluster 3: TVTC ‚Üí Boys Secondary ‚Üí JC Lodge Corridor ---
{ from: "Luanshya Town Roundabout", to: "TVTC, Luanshya", distance: 2.0 },
{ from: "Luanshya Town Roundabout", to: "JC Lodge, Luanshya", distance: 3.0 },
{ from: "Luanshya Town Roundabout", to: "Ndeke Market, Luanshya", distance: 3.1 },
{ from: "TVTC, Luanshya", to: "Luanshya Boys Secondary School", distance: 1.00 },
{ from: "Luanshya Boys Secondary School", to: "Mwetete Executive Lodge, Luanshya", distance: 1.30 },
{ from: "Mwetete Executive Lodge, Luanshya", to: "Pakawama Lodge, Luanshya", distance: 1.00 },
{ from: "Pakawama Lodge, Luanshya", to: "Bethsaida Hotels, Luanshya", distance: 0.75 },
{ from: "Bethsaida Hotels, Luanshya", to: "JC Lodge, Luanshya", distance: 2.30 },
{ from: "JC Lodge, Luanshya", to: "Malaika, Luanshya", distance: 0.70 },
{ from: "Malaika, Luanshya", to: "Ndeke SDA Church, Luanshya", distance: 0.20 },
{ from: "Ndeke SDA Church, Luanshya", to: "Ndeke Market, Luanshya", distance: 1.10 },
{ from: "Ndeke Market, Luanshya", to: "Chibansa Primary School, Luanshya", distance: 0.90 },

// --- Cluster 4: Kamirenda Corridor ---
{ from: "Luanshya Town Roundabout", to: "Kamirenda Market, Luanshya", distance: 2.4 },
{ from: "Luanshya Town Roundabout", to: "Chibansa Primary School, Luanshya", distance: 3.1 },
{ from: "Luanshya Town Roundabout", to: "Roan Mall, Luanshya", distance: 0.55 },
{ from: "Chibansa Primary School, Luanshya", to: "Kamirenda New Apostolic Church, Luanshya", distance: 3.20 },
{ from: "Kamirenda New Apostolic Church, Luanshya", to: "Kamirenda SDA Church, Luanshya", distance: 0.50 },
{ from: "Kamirenda SDA Church, Luanshya", to: "Kamirenda Community Clinic, Luanshya", distance: 1.30 },
{ from: "Kamirenda Community Clinic, Luanshya", to: "Kamirenda Market, Luanshya", distance: 1.00 },
{ from: "Kamirenda Market, Luanshya", to: "Roan Mall, Luanshya", distance: 2.40 },

// --- Cluster 5: Girls Secondary ‚Üí College of Education ‚Üí Hospitals Corridor ---
{ from: "Luanshya Town Roundabout", to: "Luanshya Girls Secondary School", distance: 0.85 },
{ from: "Luanshya Girls Secondary School", to: "De Home Guest House, Luanshya", distance: 1.50 },
{ from: "De Home Guest House, Luanshya", to: "Luanshya College of Education", distance: 1.70 },
{ from: "Luanshya College of Education", to: "Thomson District Hospital, Luanshya", distance: 3.60 },
{ from: "Luanshya Town Roundabout", to: "Thomson District Hospital, Luanshya", distance: 2.0 },
{ from: "Thomson District Hospital, Luanshya", to: "Roan Antelope General Hospital, Luanshya", distance: 5.60 },
{ from: "Luanshya Town Roundabout", to: "Roan Antelope General Hospital, Luanshya", distance: 4.6 },
{ from: "Roan Antelope General Hospital, Luanshya", to: "Roan Market, Luanshya", distance: 2.40 },
{ from: "Roan Market, Luanshya", to: "Kafubu Stadium, Luanshya", distance: 1.90 },
{ from: "Kafubu Stadium, Luanshya", to: "Bowas Lodge, Luanshya", distance: 2.50 },
{ from: "Bowas Lodge, Luanshya", to: "CLM Luanshya Copper Mines", distance: 4.00 },
{ from: "Luanshya Town Roundabout", to: "CLM Luanshya Copper Mines", distance: 2.1 },
{ from: "CLM Luanshya Copper Mines", to: "Luanshya Civic Center", distance: 1.90 },
{ from: "Luanshya Civic Center", to: "Niagara Fitment Center & Car Wash, Luanshya", distance: 2.20 },
{ from: "Luanshya Town Roundabout", to: "Niagara Fitment Center & Car Wash, Luanshya", distance: 2.5 },
{ from: "Niagara Fitment Center & Car Wash, Luanshya", to: "Antelope Milling, Luanshya", distance: 2.10 },
{ from: "Antelope Milling, Luanshya", to: "Zamefa, Luanshya", distance: 2.50 },
{ from: "Luanshya Town Roundabout", to: "Zamefa, Luanshya", distance: 1.5 },
{ from: "Zamefa, Luanshya", to: "Mazzieri Primary School, Luanshya", distance: 3.90 },
{ from: "Luanshya Town Roundabout", to: "Mazzieri Primary School, Luanshya", distance: 4.3 },
{ from: "Mazzieri Primary School, Luanshya", to: "Twashuka Market, Luanshya", distance: 1.40 },
{ from: "Twashuka Market, Luanshya", to: "Mpatamatu Stadium, Luanshya", distance: 18.10 },
{ from: "Luanshya Town Roundabout", to: "Mpatamatu Stadium, Luanshya", distance: 13.1 },
{ from: "Mpatamatu Stadium, Luanshya", to: "Section 25 Mini Hospital, Luanshya", distance: 1.20 },
{ from: "Section 25 Mini Hospital, Luanshya", to: "Mpatamatu Secondary School, Luanshya", distance: 1.40 },
{ from: "Mpatamatu Secondary School, Luanshya", to: "Mpatamatu Primary School, Luanshya", distance: 1.10 },
{ from: "Mpatamatu Primary School, Luanshya", to: "Mpatamatu Police Station, Luanshya", distance: 1.30 },
{ from: "Mpatamatu Police Station, Luanshya", to: "Mpatamatu Main SDA Church, Luanshya", distance: 1.10 },
{ from: "Mpatamatu Main SDA Church, Luanshya", to: "Mpatamatu South SDA, Luanshya", distance: 1.20 },
{ from: "Mpatamatu South SDA, Luanshya", to: "Mpatamatu Reformed Church in Zambia, Luanshya", distance: 1.00 },
{ from: "Mpatamatu Reformed Church in Zambia, Luanshya", to: "Mpatamatu Bus Stop, Luanshya", distance: 2.00 },
{ from: "Luanshya Town Roundabout", to: "Mpatamatu Bus Stop, Luanshya", distance: 11.6 },

// --- Cluster 6: Makoma ‚Üí Beracah ‚Üí Fisenge Corridor ---
{ from: "Luanshya Town Roundabout", to: "Makoma Dam, Luanshya", distance: 6.5 },
{ from: "Roan Mall, Luanshya", to: "Makoma Dam, Luanshya", distance: 6.70 },
{ from: "Makoma Dam, Luanshya", to: "Beracah Gardens, Luanshya", distance: 13.70 },
{ from: "Luanshya Town Roundabout", to: "Beracah Gardens, Luanshya", distance: 7.6 },
{ from: "Beracah Gardens, Luanshya", to: "Fisenge High School, Luanshya", distance: 3.20 },
{ from: "Luanshya Town Roundabout", to: "Fisenge High School, Luanshya", distance: 10.3 },
{ from: "Fisenge High School, Luanshya", to: "Fisenge SDA Church, Luanshya", distance: 3.80 },
{ from: "Fisenge SDA Church, Luanshya", to: "Fisenge Mosque, Luanshya", distance: 0.45 },
{ from: "Fisenge Mosque, Luanshya", to: "Lowden Lodge, Luanshya", distance: 2.90 },
{ from: "Lowden Lodge, Luanshya", to: "Mubende Country Lodge, Luanshya", distance: 1.60 },
{ from: "Mubende Country Lodge, Luanshya", to: "Luanshya Junction Market", distance: 1.70 },
{ from: "Luanshya Town Roundabout", to: "Luanshya Junction Market", distance: 11.2 },
{ from: "Luanshya Junction Market", to: "Pleasure Given Garden, Luanshya", distance: 0.85 },
{ from: "Luanshya Town Roundabout", to: "Pleasure Given Garden, Luanshya", distance: 11.9 },

// --- Cluster 7: Baluba ‚Üí Copperstone ‚Üí Maposa Corridor ---
{ from: "Luanshya Town Roundabout", to: "Baluba Market, Luanshya", distance: 11.6 },
{ from: "Baluba Market, Luanshya", to: "Misaka SDA Church, Luanshya", distance: 0.75 },
{ from: "Misaka SDA Church, Luanshya", to: "Copperstone University Zambezi Hostel, Luanshya", distance: 9.50 },
{ from: "Luanshya Town Roundabout", to: "Copperstone University Zambezi Hostel, Luanshya", distance: 16.7 },
{ from: "Copperstone University Zambezi Hostel, Luanshya", to: "CSMM Fueling Station, Luanshya", distance: 2.40 },
{ from: "CSMM Fueling Station, Luanshya", to: "Jon Ken, Luanshya", distance: 7.90 },
{ from: "Jon Ken, Luanshya", to: "CEC 220KV Maposa Substation, Luanshya", distance: 0.00 }, // placeholder
{ from: "Luanshya Town Roundabout", to: "CEC 220KV Maposa Substation, Luanshya", distance: 22.2 },
{ from: "CEC 220KV Maposa Substation, Luanshya", to: "Maposa, Luanshya", distance: 0.00 },   // placeholder

// --- Cluster 8: Missing / Unmapped Places Corridor ---

//  Mwatimwa Segment

// Buntungwa Ave / Golf Course cluster
{ from: "Luanshya Town Roundabout", to: "Luanshya Golf Course", distance: 2.5 },
{ from: "Luanshya Golf Course", to: "Golden Age Lodge, Luanshya", distance: 2.7 },
{ from: "Golden Age Lodge, Luanshya", to: "Roan Rugby Club, Luanshya", distance: 0.55 },
{ from: "Roan Rugby Club, Luanshya", to: "CLM Luanshya Copper Mines", distance: 0.5 },
{ from: "CLM Luanshya Copper Mines", to: "Luanshya Mine Hospital", distance: 0.65 },
{ from: "Luanshya Mine Hospital", to: "Luanshya Trust School", distance: 1.7 },
{ from: "Luanshya Trust School", to: "Luanshya Golf Course", distance: 2.5 },
{ from: "Luanshya Golf Course", to: "Luanshya Golf Course", distance: 0.07 },
{ from: "Luanshya Golf Club", to: "Newtown Clinic, Luanshya", distance: 1.2 },

// Newtown ‚Üí Buntungwa ‚Üí Town Roundabout cluster
{ from: "Newtown Clinic, Luanshya", to: "CLM Luanshya Copper Mines", distance: 2.1 },
{ from: "CLM Luanshya Copper Mines", to: "Luanshya Mine Hospital", distance: 0.65 },
{ from: "Luanshya Mine Hospital", to: "Kasims Medical Center, Luanshya", distance: 0.6 },
{ from: "Kasims Medical Center, Luanshya", to: "Roan Rugby Club, Luanshya", distance: 0.9 },
{ from: "Roan Rugby Club, Luanshya", to: "Luanshya Sports Complex", distance: 0.4 },
{ from: "Luanshya Sports Complex", to: "Luanshya Town Roundabout", distance: 2.6 },
{ from: "Luanshya Town Roundabout", to: "Luanshya Trust School", distance: 2.0 },

// Newtown ‚Üí Roundabout ‚Üí Independence / Industrial ‚Üí Buntungwa cluster
{ from: "Newtown Clinic, Luanshya", to: "Luanshya Town Roundabout", distance: 3.1 },
{ from: "Luanshya Town Roundabout", to: "9 Clinic, Luanshya", distance: 7.4 },
{ from: "9 Clinic, Luanshya", to: "Roan Market, Luanshya", distance: 1.5 },
{ from: "Roan Market, Luanshya", to: "Luanshya Town Roundabout", distance: 6.6 },
{ from: "Luanshya Town Roundabout", to: "Luanshya Technical and Business College", distance: 1.5 },
{ from: "Luanshya Technical and Business College", to: "DaGama Home and School, Luanshya", distance: 1.0 },
{ from: "Luanshya Central Secondary School", to: "Luanshya Town Roundabout", distance: 1.9 },
{ from: "Luanshya Central Secondary School", to: "Buntungwa Market, Luanshya", distance: 5.1 },
{ from: "Luanshya Town Roundabout", to: "Mwatimwa Pub and Grill, Luanshya", distance: 0.85 },
{ from: "Mwatimwa Pub and Grill, Luanshya", to: "Kasims Medical Center, Luanshya", distance: 1.0 }

];


    const hubs = ["Luangwa Bus Station", "Chitope, Luangwa", "Luangwa Bridge Market","Luanshya Town Roundabout","Mpatamatu Bus Stop, Luanshya"];
    const graph = {};
    segments.forEach(({ from, to, distance }) => {
      if (!graph[from]) graph[from] = []; if (!graph[to]) graph[to] = [];
      graph[from].push({ node: to, distance }); graph[to].push({ node: from, distance }); 
    });

    function findShortestDistance(start, end) { 
      if (start === end) return 0; if (!graph[start] || !graph[end]) return null;
      const distances = {}; const unvisited = new Set(Object.keys(graph));
      for (const node of unvisited) distances[node] = Infinity;
      distances[start] = 0;
      while (unvisited.size) {
        let current = null; for (const node of unvisited) { if (current === null || distances[node] < distances[current]) current = node; }
        if (current === null || distances[current] === Infinity) break; 
        if (current === end) return distances[end]; unvisited.delete(current);
        for (const neighbor of graph[current]) {
          const newDist = distances[current] + neighbor.distance;
          if (newDist < distances[neighbor.node]) distances[neighbor.node] = newDist;
        }
      }
      return null;
    }

    function calculateTotalDistance(pickup, destination) {
      if (pickup === destination) return { total: 0, trip: 0, hub: 'N/A' };
      let nearestHub = null, minD1 = Infinity;
      for (const hub of hubs) {
        const d = findShortestDistance(pickup, hub);
        if (d !== null && d < minD1) { minD1 = d; nearestHub = hub; }
      }
      if (!nearestHub) return { total: null, trip: null, hub: null };
      const d2 = findShortestDistance(pickup, destination);
      const d3 = findShortestDistance(destination, nearestHub);
      if (d2 === null || d3 === null) return { total: null, trip: null, hub: nearestHub };
      return { total: minD1 + d2 + d3, trip: d2, hub: nearestHub };
    }

    let rideData = null;
    const phoneInput = document.getElementById('customer-phone');
    const tripDiv = document.getElementById('trip-details');
    const summaryDiv = document.getElementById('summary-section');
    const statusText = document.getElementById('status');
    const submitBtn = document.getElementById('submit-btn');
    const btnIcon = document.getElementById('btn-icon');
    const btnLoader = document.getElementById('btn-loader');

    phoneInput.oninput = () => { 
      if (/^0[0-9]{9}$/.test(phoneInput.value)) { tripDiv.style.display = 'block'; }
    };

    function setupAuto(inputId, containerId, listId) {
      const input = document.getElementById(inputId);
      const container = document.getElementById(containerId);
      const list = document.getElementById(listId);
      input.oninput = () => {
        const val = input.value.toLowerCase(); list.innerHTML = ''; container.classList.remove('field-error'); statusText.textContent = ""; 
        if (!val) return;
        places.filter(p => p.toLowerCase().includes(val)).forEach(p => {
          const d = document.createElement('div'); d.className = 'suggestion'; d.textContent = p;
          d.onclick = () => { input.value = p; list.innerHTML = ''; checkReady(); };
          list.appendChild(d);
        });
      };
      input.onblur = () => { setTimeout(() => { if (input.value && !places.includes(input.value)) { container.classList.add('field-error'); statusText.textContent = "‚ö†Ô∏è Select from list."; summaryDiv.style.display = 'none'; } }, 250); };
    }

    function checkReady() {
      const from = document.getElementById('gm-origin').value; const to = document.getElementById('gm-destination').value;
      const mode = document.querySelector('input[name="mode"]:checked');
      if (places.includes(from) && places.includes(to)) {
        if (!mode) { statusText.textContent = "Select Mode."; }
        else { statusText.textContent = ""; calculate(from, to, mode.value); }
      }
    }

    function calculate(from, to, mode) {
      document.getElementById('spinner').style.display = 'block'; summaryDiv.style.display = 'none';
      setTimeout(() => {
        document.getElementById('spinner').style.display = 'none';
        const res = calculateTotalDistance(from, to);
        if (res.total === null) { statusText.textContent = "Route error."; return; }
        summaryDiv.style.display = 'block';
        document.getElementById('hub-tooltip').textContent = "Price calculated via: " + res.hub;

        let rate, minPrice, extra;
        if (mode === 'vehicle') {
          rate = config.vehiclePricePerKm; minPrice = config.vehicleMinPrice; extra = config.vehicleExtra;
        } else {
          rate = config.motorbikePricePerKm; minPrice = config.motorbikeMinPrice; extra = config.motorbikeExtra;
        }

        let price = Math.max(minPrice, Math.ceil((res.total * rate) + extra));
        document.getElementById('summary-cards').innerHTML = `<div class="summary-card"><span>Price</span><span style="color:var(--secondary-color); font-weight:bold;">K${price}</span></div><div class="summary-card"><span>Trip Distance</span><span>${res.trip.toFixed(2)} km</span></div>`;
        
        // --- CALC ESTIMATED TIME ---
        const timeVal = Math.ceil((res.trip / config.avgSpeed) * 60);

        // --- FORMAT PHONE TO +260 ---
        let formattedPhone = phoneInput.value;
        if (formattedPhone.startsWith('0')) {
          formattedPhone = '+260' + formattedPhone.substring(1);
        }
        
        rideData = { 
          preferredMode: mode, 
          phone: formattedPhone, 
          hub: res.hub, 
          from, 
          to, 
          tripDistance: res.trip.toFixed(2), 
          totalDistance: res.total.toFixed(2), 
          price: price,
          estimatedTime: timeVal + " mins" 
        };
        
        submitBtn.style.background = "var(--primary-color)"; 
        btnIcon.className = "fas fa-paper-plane"; 
        btnIcon.style.display = "block"; 
        btnLoader.style.display = "none"; 
        document.getElementById('action-label').textContent = "Request Now";
        submitBtn.onclick = handleRequest;
      }, 600);
    }

    async function handleRequest() {
      submitBtn.disabled = true; btnIcon.style.display = "none"; btnLoader.style.display = "block";
      const payload = { ...rideData, timestamp: new Date().toLocaleString() };
      
      try {
        await fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', body: new URLSearchParams(payload) });
        statusText.textContent = "Sent! You will be contacted or Quickly Call."; statusText.style.color = "var(--success-color)";
        
        btnLoader.style.display = "none"; 
        btnIcon.style.display = "block"; 
        btnIcon.className = "fas fa-phone"; 
        submitBtn.style.background = "var(--success-color)"; 
        submitBtn.disabled = false; 
        document.getElementById('action-label').textContent = "Call Now";
        
        submitBtn.onclick = function() { window.location.href = "tel:0966423229"; };
      } catch (err) { 
        statusText.textContent = "Error. Please call directly."; 
        submitBtn.disabled = false; 
        btnLoader.style.display = "none"; 
        btnIcon.style.display = "block"; 
      }
    }

    setupAuto('gm-origin', 'origin-container', 'originList');
    setupAuto('gm-destination', 'dest-container', 'destinationList');
    document.getElementById('mode-group').onchange = checkReady;
  </script>
</body>
</html>










